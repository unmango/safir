services:
  manager:
    build:
      context: .
      args:
        GithubUsername: ${GITHUB_USERNAME}
        GithubPassword: ${GITHUB_PASSWORD}
    depends_on:
    - redis
    - agent

  agent:
    image: unstoppablemango/safir-agent
    ports:
    - 6969:80
    environment:
      REDIS: redis:6379
    volumes:
    - ~/Music:/data
    depends_on:
    - redis
  
  redis:
    image: redis
    ports:
    - 6379:6379
    cap_add:
    - SYS_RESOURCE
